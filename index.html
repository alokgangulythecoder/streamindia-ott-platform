<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="description" content="Watch classical movies, concerts, operas, and documentaries on ClassicFlims - Premium classical content streaming platform">
    <meta name="keywords" content="classical music, opera, ballet, classical movies, concerts, documentaries">
    <title>ClassicFlims- Premium Classical Content Streaming</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Unbounded:wght@400;600;800&display=swap" rel="stylesheet">
   <link rel="manifest" href="manifest.json">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-bg: #0a0a0f;
            --secondary-bg: #141419;
            --card-bg: #1a1a24;
            --accent-primary: #ff3366;
            --accent-secondary: #7c3aed;
            --accent-gold: #fbbf24;
            --text-primary: #ffffff;
            --text-secondary: #a0a0b8;
            --border-color: #2a2a3a;
            --focus-ring: #ff3366;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: var(--primary-bg);
            color: var(--text-primary);
            overflow-x: hidden;
            line-height: 1.6;
        }

        *:focus {
            outline: 3px solid var(--focus-ring);
            outline-offset: 4px;
        }

        .app-container {
            width: 100%;
            min-height: 100vh;
            position: relative;
        }

        .bg-ambience {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.15;
            pointer-events: none;
        }

        .bg-ambience::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 30% 20%, rgba(255, 51, 102, 0.3) 0%, transparent 50%),
                        radial-gradient(circle at 70% 60%, rgba(124, 58, 237, 0.2) 0%, transparent 50%),
                        radial-gradient(circle at 50% 80%, rgba(251, 191, 36, 0.15) 0%, transparent 50%);
            animation: ambience-float 20s ease-in-out infinite;
        }

        @keyframes ambience-float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(50px, -50px) rotate(5deg); }
            66% { transform: translate(-50px, 50px) rotate(-5deg); }
        }

        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background: linear-gradient(180deg, rgba(10, 10, 15, 0.95) 0%, rgba(10, 10, 15, 0) 100%);
            backdrop-filter: blur(20px);
            padding: 2rem 4rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .navbar.scrolled {
            background: rgba(10, 10, 15, 0.98);
            padding: 1.5rem 4rem;
        }

        .logo {
            font-family: 'Unbounded', sans-serif;
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #ff3366 0%, #7c3aed 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.05em;
            cursor: pointer;
        }

        .nav-menu {
            display: flex;
            gap: 3rem;
            list-style: none;
        }

        .nav-item {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            position: relative;
            transition: color 0.3s ease;
            padding: 0.5rem 1rem;
            border-radius: 8px;
        }

        .nav-item:hover,
        .nav-item.active {
            color: var(--text-primary);
        }

        .nav-item::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%) scaleX(0);
            width: 80%;
            height: 3px;
            background: linear-gradient(135deg, #ff3366 0%, #7c3aed 100%);
            border-radius: 2px;
            transition: transform 0.3s ease;
        }

        .nav-item.active::after,
        .nav-item:hover::after {
            transform: translateX(-50%) scaleX(1);
        }

        .nav-actions {
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .search-icon,
        .profile-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: var(--card-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.3rem;
        }

        .search-icon:hover,
        .profile-icon:hover {
            background: var(--accent-primary);
            transform: scale(1.1);
        }

        .hero-section {
            position: relative;
            height: 95vh;
            padding-top: 8rem;
            overflow: hidden;
        }

        .hero-content {
            position: relative;
            z-index: 10;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 4rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 100%;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 51, 102, 0.15);
            border: 2px solid var(--accent-primary);
            padding: 0.8rem 1.5rem;
            border-radius: 50px;
            font-size: 0.95rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            width: fit-content;
            margin-bottom: 2rem;
        }

        .hero-title {
            font-family: 'Unbounded', sans-serif;
            font-size: 5rem;
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            max-width: 900px;
        }

        .hero-description {
            font-size: 1.4rem;
            color: var(--text-secondary);
            max-width: 700px;
            margin-bottom: 3rem;
            line-height: 1.8;
        }

        .hero-actions {
            display: flex;
            gap: 1.5rem;
        }

        .btn {
            padding: 1.2rem 3rem;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-family: 'Plus Jakarta Sans', sans-serif;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ff3366 0%, #7c3aed 100%);
            color: white;
            box-shadow: 0 10px 30px rgba(255, 51, 102, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(255, 51, 102, 0.5);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-3px);
        }

        .content-section {
            position: relative;
            z-index: 10;
            padding: 4rem 4rem;
            max-width: 1600px;
            margin: 0 auto;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2.5rem;
        }

        .section-title {
            font-family: 'Unbounded', sans-serif;
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .view-all {
            color: var(--accent-primary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
        }

        .view-all:hover {
            background: rgba(255, 51, 102, 0.1);
            transform: translateX(5px);
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 4rem;
        }

        .content-card {
            position: relative;
            border-radius: 16px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: var(--card-bg);
            aspect-ratio: 2/3;
        }

        .content-card:hover {
            transform: translateY(-15px) scale(1.03);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            z-index: 100;
        }

        .card-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease;
        }

        .content-card:hover .card-image {
            transform: scale(1.1);
        }

        .card-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 2rem;
            background: linear-gradient(0deg, rgba(10, 10, 15, 0.95) 0%, transparent 100%);
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.4s ease;
        }

        .content-card:hover .card-overlay {
            transform: translateY(0);
            opacity: 1;
        }

        .card-title {
            font-weight: 700;
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }

        .card-meta {
            display: flex;
            gap: 1rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.8rem;
        }

        .card-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.5rem 1rem;
            background: var(--accent-primary);
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            z-index: 10;
        }

        .card-rating {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .card-actions {
            display: flex;
            gap: 0.8rem;
            margin-top: 1rem;
        }

        .card-btn {
            flex: 1;
            padding: 0.8rem;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .card-btn-play {
            background: white;
            color: var(--primary-bg);
        }

        .card-btn-play:hover {
            background: var(--accent-primary);
            color: white;
        }

        .card-btn-info {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card-btn-info:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .player-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .player-container {
            width: 100%;
            max-width: 1400px;
            aspect-ratio: 16/9;
            background: #000;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
        }

        .player-close {
            position: absolute;
            top: 2rem;
            right: 2rem;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 100;
            transition: all 0.3s ease;
        }

        .player-close:hover {
            background: var(--accent-primary);
            transform: rotate(90deg);
        }

        .player-content {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-size: 3rem;
            font-weight: 700;
        }

        .footer {
            background: var(--secondary-bg);
            padding: 4rem;
            margin-top: 6rem;
            border-top: 1px solid var(--border-color);
        }

        .footer-content {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
        }

        .footer-section h3 {
            font-family: 'Unbounded', sans-serif;
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 0.8rem;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--text-primary);
        }

        .footer-bottom {
            max-width: 1400px;
            margin: 3rem auto 0;
            padding-top: 2rem;
            border-top: 1px solid var(--border-color);
            text-align: center;
            color: var(--text-secondary);
        }

        .ad-banner {
            margin: 2rem 0;
            border-radius: 12px;
            overflow: hidden;
        }

        .ad-banner img {
            width: 100%;
            display: block;
        }

        .loading-message {
            text-align: center;
            padding: 4rem;
            font-size: 1.5rem;
        }

        .no-content-message {
            text-align: center;
            padding: 4rem;
        }

        .no-content-message h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .no-content-message p {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        /* Page subheader (Movies / Series / Live heading) */
        .page-subheader {
            padding: 8rem 4rem 0;
            max-width: 1600px;
            margin: 0 auto;
        }

        /* Prevent iOS input zoom (inputs stay 16px font) */
        input, select, textarea {
            font-size: 16px !important;
        }

        /* Smooth scrolling */
        html { scroll-behavior: smooth; }

        /* =============================================
           MOBILE HAMBURGER MENU
        ============================================= */
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.6rem;
            cursor: pointer;
            padding: 0.4rem;
            line-height: 1;
        }

        .mobile-menu-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: var(--primary-bg);
            z-index: 2000;
            flex-direction: column;
            padding: 2rem;
            overflow-y: auto;
        }
        .mobile-menu-overlay.open { display: flex; }

        .mobile-menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2.5rem;
        }
        .mobile-menu-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
        }
        .mobile-nav-item {
            font-size: 1.4rem;
            font-weight: 600;
            padding: 1rem 0;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .mobile-nav-item:active { color: var(--accent-primary); }
        .mobile-auth-row {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }
        .mobile-auth-row button {
            flex: 1;
            padding: 0.9rem;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            font-family: inherit;
        }

        /* =============================================
           TABLET  (max 1024px)
        ============================================= */
        @media (max-width: 1024px) {
            .navbar { padding: 1.2rem 2rem; }
            .navbar.scrolled { padding: 1rem 2rem; }
            .logo { font-size: 2rem; }
            .hero-title { font-size: 3.8rem; }
            .content-section { padding: 3rem 2rem; }
            .content-grid { grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 1.5rem; }
            .section-title { font-size: 1.8rem; }
        }

        /* =============================================
           MOBILE  (max 768px) ‚Äî phones & small tablets
        ============================================= */
        @media (max-width: 768px) {
            /* NAV */
            .navbar {
                padding: 0.9rem 1.2rem;
                -webkit-backdrop-filter: blur(20px);
            }
            .navbar.scrolled { padding: 0.75rem 1.2rem; }
            .logo { font-size: 1.5rem; letter-spacing: -0.03em; }
            .nav-menu { display: none; }
            .nav-actions { gap: 0.6rem; }
            .nav-actions > button { display: none; } /* hide login/signup ‚Äî in mobile menu */
            .search-icon, .profile-icon {
                width: 40px; height: 40px;
                border-radius: 10px;
                font-size: 1.1rem;
            }
            .mobile-menu-btn { display: block; }

            /* HERO */
            .hero-section {
                height: auto;
                min-height: 85vh;
                padding-top: 5rem;
                padding-bottom: 3rem;
                display: flex;
                align-items: center;
            }
            .hero-content {
                padding: 0 1.2rem;
                height: auto;
            }
            .hero-badge {
                font-size: 0.7rem;
                padding: 0.5rem 1rem;
                margin-bottom: 1rem;
                letter-spacing: 0.06em;
            }
            .hero-title {
                font-size: 2rem;
                line-height: 1.15;
                margin-bottom: 1rem;
                max-width: 100%;
            }
            .hero-description {
                font-size: 0.95rem;
                margin-bottom: 1.8rem;
                max-width: 100%;
                line-height: 1.7;
            }
            .hero-actions {
                flex-direction: column;
                gap: 0.8rem;
                align-items: stretch;
            }
            .btn {
                padding: 0.95rem 1.5rem;
                font-size: 1rem;
                justify-content: center;
                border-radius: 10px;
            }

            /* CONTENT */
            .content-section { padding: 1.5rem 1rem; }
            .section-header { margin-bottom: 1.2rem; }
            .section-title { font-size: 1.25rem; }
            .view-all { font-size: 0.85rem; padding: 0.5rem 0.8rem; }
            .content-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.75rem;
                margin-bottom: 2rem;
            }

            /* CARDS ‚Äî always show overlay on mobile (no hover) */
            .content-card { border-radius: 10px; }
            .content-card:hover {
                transform: none;
                box-shadow: none;
            }
            .card-overlay {
                transform: translateY(0);
                opacity: 1;
                background: linear-gradient(0deg, rgba(10,10,15,0.98) 0%, rgba(10,10,15,0.4) 60%, transparent 100%);
                padding: 0.8rem;
            }
            .card-title { font-size: 0.85rem; margin-bottom: 0.2rem; }
            .card-meta { font-size: 0.7rem; gap: 0.4rem; margin-bottom: 0.3rem; }
            .card-rating { font-size: 0.7rem; }
            .card-badge { font-size: 0.6rem; padding: 0.25rem 0.5rem; top: 0.5rem; right: 0.5rem; }
            .card-actions { gap: 0.4rem; margin-top: 0.5rem; }
            .card-btn { padding: 0.55rem 0.3rem; font-size: 0.75rem; border-radius: 6px; }

            /* PLAYER */
            .player-modal { padding: 0; }
            .player-container {
                border-radius: 0;
                max-width: 100%;
                width: 100%;
            }
            .player-close {
                top: 0.75rem; right: 0.75rem;
                width: 38px; height: 38px;
                font-size: 1.1rem;
            }

            /* PAGE SUBHEADER */
            .page-subheader { padding: 5.5rem 1.2rem 1rem; }
            .page-subheader h1 { font-size: 1.6rem; }

            /* FOOTER */
            .footer {
                padding: 2.5rem 1.2rem 1.5rem;
                margin-top: 3rem;
            }
            .footer-content {
                grid-template-columns: repeat(2, 1fr);
                gap: 2rem;
            }
            .footer-section h3 { font-size: 1rem; margin-bottom: 0.8rem; }
            .footer-links li { margin-bottom: 0.5rem; }
            .footer-links a { font-size: 0.85rem; }
            .footer-bottom { margin-top: 1.5rem; font-size: 0.8rem; }

            /* LOADING / EMPTY */
            .loading-message { padding: 3rem 1rem; font-size: 1.1rem; }
            .no-content-message { padding: 3rem 1rem; }
            .no-content-message h2 { font-size: 1.4rem; }
        }

        /* =============================================
           SMALL PHONES  (max 390px)  iPhone SE, older Androids
        ============================================= */
        @media (max-width: 390px) {
            .logo { font-size: 1.25rem; }
            .hero-title { font-size: 1.7rem; }
            .hero-description { font-size: 0.9rem; }
            .content-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.6rem;
            }
            .card-title { font-size: 0.78rem; }
            .footer-content { grid-template-columns: 1fr; gap: 1.5rem; }
        }

        /* =============================================
           SAFE AREAS ‚Äî iPhone notch / home indicator
        ============================================= */
        @supports (padding: max(0px)) {
            .navbar {
                padding-left: max(1.2rem, env(safe-area-inset-left));
                padding-right: max(1.2rem, env(safe-area-inset-right));
            }
            .footer {
                padding-bottom: max(1.5rem, env(safe-area-inset-bottom));
            }
        }

        /* =============================================
           TOUCH ‚Äî remove hover effects on touch devices
        ============================================= */
        @media (hover: none) {
            .content-card:hover { transform: none; box-shadow: none; }
            .btn:hover { transform: none; }
            .nav-item:hover::after { transform: translateX(-50%) scaleX(0); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ========================================
        // API Configuration ‚Äî UPDATE THIS URL
        // ========================================
        const API_CONFIG = {
            BASE_URL: window.location.hostname === 'localhost'
               ? 'http://localhost:3000/api'
                : 'https://streamindia-ott-platform-dgj8.vercel.app/api',
            ENDPOINTS: {
                CONTENT: '/content',
                CONTENT_BY_ID: (id) => `/content/${id}`,
                CONTENT_VIEW: (id) => `/content/${id}/view`,
                NAVIGATION: '/navigation',
                ADS: '/advertisements',
                AD_IMPRESSION: (id) => `/advertisements/${id}/impression`,
                AD_CLICK: (id) => `/advertisements/${id}/click`,
                SETTINGS: '/settings'
            }
        };

        // ========================================
        // API Helper Functions
        // ========================================
        const api = {
            getContent: async (filters = {}) => {
                try {
                    const params = new URLSearchParams(filters);
                    const response = await fetch(`${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.CONTENT}?${params}`);
                    return await response.json();
                } catch (error) {
                    console.error('API Error:', error);
                    return { content: [] };
                }
            },

            getContentById: async (id) => {
                try {
                    const response = await fetch(`${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.CONTENT_BY_ID(id)}`);
                    return await response.json();
                } catch (error) {
                    console.error('API Error:', error);
                    return null;
                }
            },

            trackView: async (id) => {
                try {
                    await fetch(`${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.CONTENT_VIEW(id)}`, {
                        method: 'POST'
                    });
                } catch (error) {
                    console.error('Track view error:', error);
                }
            },

            getNavigation: async () => {
                try {
                    const response = await fetch(`${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.NAVIGATION}`);
                    return await response.json();
                } catch (error) {
                    console.error('API Error:', error);
                    return [];
                }
            },

            getAds: async (position, type) => {
                try {
                    const params = new URLSearchParams({ position, type });
                    const response = await fetch(`${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.ADS}?${params}`);
                    return await response.json();
                } catch (error) {
                    console.error('API Error:', error);
                    return [];
                }
            },

            trackAdImpression: async (id) => {
                try {
                    await fetch(`${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.AD_IMPRESSION(id)}`, {
                        method: 'POST'
                    });
                } catch (error) {
                    console.error('Track ad impression error:', error);
                }
            },

            trackAdClick: async (id) => {
                try {
                    await fetch(`${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.AD_CLICK(id)}`, {
                        method: 'POST'
                    });
                } catch (error) {
                    console.error('Track ad click error:', error);
                }
            },

            getSettings: async () => {
                try {
                    const response = await fetch(`${API_CONFIG.BASE_URL}${API_CONFIG.ENDPOINTS.SETTINGS}`);
                    return await response.json();
                } catch (error) {
                    console.error('API Error:', error);
                    return {};
                }
            }
        };

        // ========================================
        // Main App Component
        // ========================================
        function App() {
            // ---- State ----
            const [page, setPage]                       = useState('home');  // 'home' | 'movies' | 'series' | 'live'
            const [scrolled, setScrolled]               = useState(false);
            const [playerOpen, setPlayerOpen]           = useState(false);
            const [selectedContent, setSelectedContent] = useState(null);
            const [infoContent, setInfoContent]         = useState(null);   // for Info modal
            const [searchOpen, setSearchOpen]           = useState(false);
            const [searchQuery, setSearchQuery]         = useState('');
            const [searchResults, setSearchResults]     = useState([]);
            const [authModal, setAuthModal]             = useState(null);   // 'login' | 'signup' | null
            const [loggedIn, setLoggedIn]               = useState(() => !!localStorage.getItem('userToken'));
            const [userName, setUserName]               = useState(() => localStorage.getItem('userName') || '');
            const [mobileMenuOpen, setMobileMenuOpen]   = useState(false);

            const [allContent, setAllContent]           = useState([]);
            const [backendContent, setBackendContent]   = useState({ trending: [], movies: [], series: [], featured: [] });
            const [navigation, setNavigation]           = useState([]);
            const [headerAd, setHeaderAd]               = useState(null);
            const [settings, setSettings]               = useState({});
            const [loading, setLoading]                 = useState(true);

            const searchInputRef = useRef(null);

            // ---- Load data ----
            useEffect(() => { loadAllData(); }, []);

            const loadAllData = async () => {
                setLoading(true);
                try {
                    const [allData, navData, adsData, settingsData] = await Promise.all([
                        api.getContent({ limit: 100 }),
                        api.getNavigation(),
                        api.getAds('header', 'banner'),
                        api.getSettings()
                    ]);

                    const all = allData.content || [];
                    setAllContent(all);
                    setBackendContent({
                        trending: all.filter(c => c.trending),
                        movies:   all.filter(c => c.type === 'movie'),
                        series:   all.filter(c => c.type === 'series'),
                        featured: all.filter(c => c.featured)
                    });

                    setNavigation(navData || []);

                    const activeAds = Array.isArray(adsData) ? adsData.filter(a => a.active) : [];
                    const hAd = activeAds.find(a => a.position === 'header');
                    if (hAd) { setHeaderAd(hAd); api.trackAdImpression(hAd._id); }

                    // Settings comes back as array [{key,value},...] ‚Äî convert to map
                    const sMap = {};
                    if (Array.isArray(settingsData)) {
                        settingsData.forEach(s => { sMap[s.key] = s.value; });
                    } else if (settingsData && typeof settingsData === 'object') {
                        Object.assign(sMap, settingsData);
                    }
                    setSettings(sMap);
                    if (sMap.primary_color)   document.documentElement.style.setProperty('--accent-primary', sMap.primary_color);
                    if (sMap.secondary_color) document.documentElement.style.setProperty('--accent-secondary', sMap.secondary_color);
                    if (sMap.site_name)       document.title = sMap.site_name + ' - Premium OTT Platform';

                } catch (err) { console.error('Error loading data:', err); }
                setLoading(false);
            };

            // ---- Scroll ----
            useEffect(() => {
                const h = () => setScrolled(window.scrollY > 50);
                window.addEventListener('scroll', h);
                return () => window.removeEventListener('scroll', h);
            }, []);

            // ---- Search focus when opened ----
            useEffect(() => {
                if (searchOpen) setTimeout(() => searchInputRef.current?.focus(), 50);
            }, [searchOpen]);

            // ---- Live search filter ----
            useEffect(() => {
                if (!searchQuery.trim()) { setSearchResults([]); return; }
                const q = searchQuery.toLowerCase();
                setSearchResults(
                    allContent.filter(c =>
                        c.title?.toLowerCase().includes(q) ||
                        c.category?.toLowerCase().includes(q) ||
                        c.description?.toLowerCase().includes(q)
                    ).slice(0, 8)
                );
            }, [searchQuery, allContent]);

            // ---- Actions ----
            const playContent = (content) => {
                setSelectedContent(content);
                setPlayerOpen(true);
                if (content._id) api.trackView(content._id);
            };

            const handleAdClick = (ad) => {
                if (ad._id) api.trackAdClick(ad._id);
                if (ad.clickUrl) window.open(ad.clickUrl, '_blank');
            };

            const seedDatabase = async () => {
                try {
                    const res = await fetch(`${API_CONFIG.BASE_URL}/seed`, { method: 'POST' });
                    const data = await res.json();
                    alert(data.message || 'Database seeded!');
                    window.location.reload();
                } catch (e) { alert('Seed failed: ' + e.message); }
            };

            // Nav page routing
            const handleNavClick = (label) => {
                setMobileMenuOpen(false);
                const l = label.toLowerCase();
                if (l === 'home')               setPage('home');
                else if (l.includes('movie'))   setPage('movies');
                else if (l.includes('serie'))   setPage('series');
                else if (l.includes('live'))    setPage('live');
                else                            setPage('home');
            };

            // YouTube / Vimeo embed converter
            const getEmbedUrl = (url) => {
                if (!url) return null;
                const yt = url.match(/(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);
                if (yt) return `https://www.youtube.com/embed/${yt[1]}?autoplay=1&rel=0`;
                const vm = url.match(/vimeo\.com\/(\d+)/);
                if (vm) return `https://player.vimeo.com/video/${vm[1]}?autoplay=1`;
                if (url.startsWith('http')) return url;
                return null;
            };

            const hasContent = allContent.length > 0;

            const defaultNavItems = ['Home', 'Movies', 'Series', 'Live'];

            // ---- Sub-components ----

            const AdBanner = ({ ad, position }) => {
                if (!ad) return null;
                return (
                    <div className={`ad-banner ad-${position}`}
                        onClick={() => handleAdClick(ad)}
                        style={{ cursor: ad.clickUrl ? 'pointer' : 'default' }}>
                        {ad.imageUrl && <img src={ad.imageUrl} alt={ad.title} />}
                    </div>
                );
            };

            const ContentCard = ({ content }) => (
                <div className="content-card" tabIndex="0">
                    <img
                        src={content.thumbnailUrl || `https://picsum.photos/seed/${content._id}/300/450`}
                        alt={content.title}
                        className="card-image"
                        onError={e => { e.target.src = 'https://picsum.photos/300/450'; }}
                    />
                    {content.featured && <div className="card-badge">Featured</div>}
                    {content.trending && !content.featured && <div className="card-badge" style={{background:'#f59e0b'}}>Trending</div>}
                    <div className="card-overlay">
                        <div className="card-title">{content.title}</div>
                        <div className="card-meta">
                            <span>{content.type}</span>
                            <span>‚Ä¢</span>
                            <span>{content.year || 'N/A'}</span>
                            {content.language && (<><span>‚Ä¢</span><span>{content.language}</span></>)}
                        </div>
                        {content.rating && (
                            <div className="card-rating">
                                <span>‚≠ê</span><span>{content.rating}/10</span>
                            </div>
                        )}
                        {content.views > 0 && (
                            <div className="card-meta">
                                <span>üëÅÔ∏è {content.views.toLocaleString()} views</span>
                            </div>
                        )}
                        <div className="card-actions">
                            <button className="card-btn card-btn-play" onClick={() => playContent(content)}>‚ñ∂ Play</button>
                            <button className="card-btn card-btn-info" onClick={() => setInfoContent(content)}>‚Ñπ Info</button>
                        </div>
                    </div>
                </div>
            );

            const ContentSection = ({ title, items, onViewAll }) => {
                if (!items || items.length === 0) return null;
                return (
                    <>
                        <div className="section-header">
                            <h2 className="section-title">{title}</h2>
                            <span className="view-all" onClick={onViewAll}>View All ‚Üí</span>
                        </div>
                        <div className="content-grid">
                            {items.map(c => <ContentCard key={c._id} content={c} />)}
                        </div>
                    </>
                );
            };

            // ---- Page rendering ----
            const renderPageContent = () => {
                if (loading) return (
                    <div className="loading-message">
                        <h2>‚è≥ Loading content...</h2>
                        <p>Fetching from backend, please wait...</p>
                    </div>
                );

                if (!hasContent) return (
                    <div className="no-content-message">
                        <h2>No content available</h2>
                        <p>The database needs to be initialized with content.</p>
                        <button className="btn btn-primary" onClick={seedDatabase}>üå± Initialize Database</button>
                    </div>
                );

                if (page === 'movies') return (
                    <>
                        <div style={{paddingTop:'2rem',marginBottom:'1.5rem'}}>
                            <h2 className="section-title">üé¨ All Movies</h2>
                        </div>
                        {backendContent.movies.length === 0
                            ? <p style={{color:'var(--text-secondary)'}}>No movies found.</p>
                            : <div className="content-grid">
                                {backendContent.movies.map(c => <ContentCard key={c._id} content={c} />)}
                              </div>
                        }
                    </>
                );

                if (page === 'series') return (
                    <>
                        <div style={{paddingTop:'2rem',marginBottom:'1.5rem'}}>
                            <h2 className="section-title">üì∫ All Series</h2>
                        </div>
                        {backendContent.series.length === 0
                            ? <p style={{color:'var(--text-secondary)'}}>No series found.</p>
                            : <div className="content-grid">
                                {backendContent.series.map(c => <ContentCard key={c._id} content={c} />)}
                              </div>
                        }
                    </>
                );

                if (page === 'live') return (
                    <>
                        <div style={{paddingTop:'2rem',marginBottom:'1.5rem'}}>
                            <h2 className="section-title">üì° Live</h2>
                        </div>
                        <p style={{color:'var(--text-secondary)'}}>No live streams available right now. Check back soon!</p>
                    </>
                );

                // Home page
                return (
                    <>
                        <ContentSection title="üî• Trending Now" items={backendContent.trending} onViewAll={() => setPage('home')} />
                        <ContentSection title="üé¨ Movies"       items={backendContent.movies}   onViewAll={() => setPage('movies')} />
                        <ContentSection title="üì∫ Series"       items={backendContent.series}   onViewAll={() => setPage('series')} />
                        <ContentSection title="‚≠ê Featured"     items={backendContent.featured} onViewAll={() => setPage('home')} />
                    </>
                );
            };

            // ---- JSX ----
            return (
                <div className="app-container">
                    <div className="bg-ambience"></div>

                    {/* ===== NAVBAR ===== */}
                    <nav className={`navbar ${scrolled ? 'scrolled' : ''}`}>
                        <div className="logo" onClick={() => setPage('home')} style={{cursor:'pointer'}}>
                            {settings.site_name || 'ClassicFlims'}
                        </div>

                        <ul className="nav-menu">
                            {(navigation.length > 0 ? navigation : defaultNavItems.map(l => ({ label: l, icon: '' }))).map((item, i) => {
                                const label = item.label || item;
                                const isActive =
                                    (label === 'Home' && page === 'home') ||
                                    (label.toLowerCase().includes('movie') && page === 'movies') ||
                                    (label.toLowerCase().includes('serie') && page === 'series') ||
                                    (label.toLowerCase().includes('live') && page === 'live');
                                return (
                                    <li key={item._id || i}
                                        className={`nav-item ${isActive ? 'active' : ''}`}
                                        onClick={() => handleNavClick(label)}>
                                        {item.icon && <span>{item.icon}</span>} {label}
                                    </li>
                                );
                            })}
                        </ul>

                        <div className="nav-actions">
                            {/* Search */}
                            <div className="search-icon" onClick={() => setSearchOpen(true)} title="Search">üîç</div>

                            {/* Login / Profile */}
                            {loggedIn ? (
                                <div className="profile-icon" title={userName}
                                    onClick={() => { if (confirm('Logout?')) { localStorage.removeItem('userToken'); localStorage.removeItem('userName'); setLoggedIn(false); setUserName(''); } }}
                                    style={{fontWeight:700, fontSize:'1rem'}}>
                                    {userName.charAt(0).toUpperCase()}
                                </div>
                            ) : (
                                <>
                                    <button onClick={() => setAuthModal('login')}
                                        style={{background:'transparent',border:'2px solid rgba(255,255,255,0.25)',color:'white',padding:'0.5rem 1.2rem',borderRadius:'8px',cursor:'pointer',fontWeight:600,fontSize:'0.95rem',fontFamily:'inherit',transition:'all 0.3s'}}>
                                        Login
                                    </button>
                                    <button onClick={() => setAuthModal('signup')}
                                        style={{background:'linear-gradient(135deg,#ff3366,#7c3aed)',border:'none',color:'white',padding:'0.5rem 1.2rem',borderRadius:'8px',cursor:'pointer',fontWeight:700,fontSize:'0.95rem',fontFamily:'inherit',transition:'all 0.3s'}}>
                                        Sign Up
                                    </button>
                                </>
                            )}
                            {/* Hamburger ‚Äî mobile only */}
                            <button className="mobile-menu-btn" onClick={() => setMobileMenuOpen(true)} aria-label="Open menu">‚ò∞</button>
                        </div>
                    </nav>

                    {/* ===== MOBILE MENU OVERLAY ===== */}
                    <div className={`mobile-menu-overlay ${mobileMenuOpen ? 'open' : ''}`}>
                        <div className="mobile-menu-header">
                            <div className="logo">{settings.site_name || 'ClassicFlims'}</div>
                            <button className="mobile-menu-close" onClick={() => setMobileMenuOpen(false)} aria-label="Close menu">‚úï</button>
                        </div>
                        {(navigation.length > 0 ? navigation : defaultNavItems.map(l => ({ label: l, icon: '' }))).map((item, i) => {
                            const label = item.label || item;
                            return (
                                <div key={i} className="mobile-nav-item" onClick={() => { handleNavClick(label); setMobileMenuOpen(false); }}>
                                    {item.icon && <span>{item.icon}</span>}{label}
                                </div>
                            );
                        })}
                        <div className="mobile-auth-row">
                            {loggedIn ? (
                                <button onClick={() => { localStorage.removeItem('userToken'); localStorage.removeItem('userName'); setLoggedIn(false); setUserName(''); setMobileMenuOpen(false); }}
                                    style={{background:'rgba(255,51,102,0.15)',border:'2px solid var(--accent-primary)',color:'var(--accent-primary)',borderRadius:'10px'}}>
                                    Logout ({userName})
                                </button>
                            ) : (
                                <>
                                    <button onClick={() => { setAuthModal('login'); setMobileMenuOpen(false); }}
                                        style={{background:'transparent',border:'2px solid rgba(255,255,255,0.25)',color:'white'}}>
                                        Login
                                    </button>
                                    <button onClick={() => { setAuthModal('signup'); setMobileMenuOpen(false); }}
                                        style={{background:'linear-gradient(135deg,#ff3366,#7c3aed)',border:'none',color:'white'}}>
                                        Sign Up
                                    </button>
                                </>
                            )}
                        </div>
                    </div>

                    {/* ===== SEARCH OVERLAY ===== */}
                    {searchOpen && (
                        <div onClick={e => { if (e.target === e.currentTarget) { setSearchOpen(false); setSearchQuery(''); } }}
                            style={{position:'fixed',top:0,left:0,width:'100%',height:'100%',background:'rgba(0,0,0,0.85)',backdropFilter:'blur(10px)',zIndex:3000,display:'flex',alignItems:'flex-start',justifyContent:'center',paddingTop:'6rem'}}>
                            <div style={{width:'90%',maxWidth:'680px',background:'var(--secondary-bg)',borderRadius:'16px',border:'1px solid var(--border-color)',overflow:'hidden'}}>
                                <div style={{display:'flex',alignItems:'center',gap:'1rem',padding:'1.2rem 1.5rem',borderBottom:'1px solid var(--border-color)'}}>
                                    <span style={{fontSize:'1.3rem'}}>üîç</span>
                                    <input ref={searchInputRef} value={searchQuery}
                                        onChange={e => setSearchQuery(e.target.value)}
                                        onKeyDown={e => { if (e.key === 'Escape') { setSearchOpen(false); setSearchQuery(''); } }}
                                        placeholder="Search movies, series, categories..."
                                        style={{flex:1,background:'transparent',border:'none',outline:'none',color:'white',fontSize:'1.15rem',fontFamily:'inherit'}} />
                                    <button onClick={() => { setSearchOpen(false); setSearchQuery(''); }}
                                        style={{background:'none',border:'none',color:'var(--text-secondary)',fontSize:'1.4rem',cursor:'pointer'}}>‚úï</button>
                                </div>
                                {searchQuery && (
                                    <div style={{padding:'0.5rem 1rem 1rem'}}>
                                        {searchResults.length === 0 ? (
                                            <p style={{color:'var(--text-secondary)',padding:'1.5rem',textAlign:'center'}}>No results for "{searchQuery}"</p>
                                        ) : (
                                            <>
                                                <p style={{color:'var(--text-secondary)',fontSize:'0.85rem',padding:'0.75rem 0.5rem 0.5rem'}}>{searchResults.length} result{searchResults.length > 1 ? 's' : ''}</p>
                                                {searchResults.map(c => (
                                                    <div key={c._id} onClick={() => { setSearchOpen(false); setSearchQuery(''); setInfoContent(c); }}
                                                        style={{display:'flex',gap:'1rem',alignItems:'center',padding:'0.75rem',borderRadius:'10px',cursor:'pointer',transition:'background 0.2s'}}
                                                        onMouseOver={e => e.currentTarget.style.background='var(--card-bg)'}
                                                        onMouseOut={e => e.currentTarget.style.background='transparent'}>
                                                        <img src={c.thumbnailUrl || `https://picsum.photos/seed/${c._id}/50/70`} alt={c.title}
                                                            style={{width:'46px',height:'64px',objectFit:'cover',borderRadius:'6px',flexShrink:0}} />
                                                        <div>
                                                            <div style={{fontWeight:600,marginBottom:'0.2rem'}}>{c.title}</div>
                                                            <div style={{fontSize:'0.85rem',color:'var(--text-secondary)'}}>{c.type} ‚Ä¢ {c.year || 'N/A'} {c.category ? `‚Ä¢ ${c.category}` : ''}</div>
                                                        </div>
                                                    </div>
                                                ))}
                                            </>
                                        )}
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* ===== AUTH MODAL ===== */}
                    {authModal && (
                        <div onClick={e => { if (e.target === e.currentTarget) setAuthModal(null); }}
                            style={{position:'fixed',top:0,left:0,width:'100%',height:'100%',background:'rgba(0,0,0,0.85)',backdropFilter:'blur(10px)',zIndex:4000,display:'flex',alignItems:'center',justifyContent:'center',padding:'1rem'}}>
                            <div style={{background:'var(--secondary-bg)',borderRadius:'20px',padding:'2.5rem',width:'100%',maxWidth:'420px',border:'1px solid var(--border-color)',position:'relative'}}>
                                <button onClick={() => setAuthModal(null)}
                                    style={{position:'absolute',top:'1rem',right:'1rem',background:'none',border:'none',color:'var(--text-secondary)',fontSize:'1.5rem',cursor:'pointer',lineHeight:1}}>‚úï</button>

                                {authModal === 'login' ? (
                                    <>
                                        <h2 style={{fontFamily:'Unbounded,sans-serif',fontSize:'1.6rem',marginBottom:'0.4rem'}}>Welcome Back</h2>
                                        <p style={{color:'var(--text-secondary)',marginBottom:'2rem',fontSize:'0.95rem'}}>Sign in to your account</p>
                                        <form onSubmit={async e => {
                                                e.preventDefault();
                                                const btn = e.target.querySelector('[type=submit]');
                                                const origText = btn.textContent;
                                                btn.textContent = 'Signing in...'; btn.disabled = true;
                                                try {
                                                    const res = await fetch(`${API_CONFIG.BASE_URL}/users/login`, {
                                                        method: 'POST',
                                                        headers: { 'Content-Type': 'application/json' },
                                                        body: JSON.stringify({ email: e.target.email.value, password: e.target.password.value })
                                                    });
                                                    const data = await res.json();
                                                    if (res.ok) {
                                                        localStorage.setItem('userToken', data.token);
                                                        localStorage.setItem('userName', data.user.name);
                                                        setLoggedIn(true);
                                                        setUserName(data.user.name);
                                                        setAuthModal(null);
                                                    } else {
                                                        alert(data.error || 'Login failed. Please check your credentials.');
                                                        btn.textContent = origText; btn.disabled = false;
                                                    }
                                                } catch(err) {
                                                    alert('Connection error ‚Äî is the server running?');
                                                    btn.textContent = origText; btn.disabled = false;
                                                }
                                            }}>
                                            {[['email','Email','email','you@example.com'],['password','Password','password','‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢']].map(([n,l,t,p]) => (
                                                <div key={n} style={{marginBottom:'1.2rem'}}>
                                                    <label style={{display:'block',fontSize:'0.875rem',fontWeight:600,marginBottom:'0.5rem',color:'var(--text-secondary)'}}>{l}</label>
                                                    <input name={n} type={t} placeholder={p} required
                                                        style={{width:'100%',padding:'0.85rem 1rem',background:'var(--card-bg)',border:'1.5px solid var(--border-color)',borderRadius:'10px',color:'white',fontSize:'1rem',fontFamily:'inherit',outline:'none'}} />
                                                </div>
                                            ))}
                                            <button type="submit"
                                                style={{width:'100%',padding:'1rem',borderRadius:'10px',background:'linear-gradient(135deg,#ff3366,#7c3aed)',border:'none',color:'white',fontWeight:700,fontSize:'1rem',cursor:'pointer',fontFamily:'inherit',marginTop:'0.5rem'}}>
                                                Sign In
                                            </button>
                                        </form>
                                        <p style={{textAlign:'center',marginTop:'1.5rem',color:'var(--text-secondary)',fontSize:'0.9rem'}}>
                                            Don't have an account? <span onClick={() => setAuthModal('signup')} style={{color:'var(--accent-primary)',cursor:'pointer',fontWeight:600}}>Sign Up</span>
                                        </p>
                                    </>
                                ) : (
                                    <>
                                        <h2 style={{fontFamily:'Unbounded,sans-serif',fontSize:'1.6rem',marginBottom:'0.4rem'}}>Create Account</h2>
                                        <p style={{color:'var(--text-secondary)',marginBottom:'2rem',fontSize:'0.95rem'}}>Join and start streaming</p>
                                        <form onSubmit={async e => {
                                                e.preventDefault();
                                                const btn = e.target.querySelector('[type=submit]');
                                                const origText = btn.textContent;
                                                btn.textContent = 'Creating account...'; btn.disabled = true;
                                                try {
                                                    const res = await fetch(`${API_CONFIG.BASE_URL}/users/register`, {
                                                        method: 'POST',
                                                        headers: { 'Content-Type': 'application/json' },
                                                        body: JSON.stringify({
                                                            name: e.target.name.value,
                                                            email: e.target.email.value,
                                                            password: e.target.password.value
                                                        })
                                                    });
                                                    const data = await res.json();
                                                    if (res.ok) {
                                                        localStorage.setItem('userToken', data.token);
                                                        localStorage.setItem('userName', data.user.name);
                                                        setLoggedIn(true);
                                                        setUserName(data.user.name);
                                                        setAuthModal(null);
                                                    } else {
                                                        alert(data.error || 'Registration failed. Please try again.');
                                                        btn.textContent = origText; btn.disabled = false;
                                                    }
                                                } catch(err) {
                                                    alert('Connection error ‚Äî is the server running?');
                                                    btn.textContent = origText; btn.disabled = false;
                                                }
                                            }}>
                                            {[['name','Full Name','text','Your Name'],['email','Email','email','you@example.com'],['password','Password','password','Min. 6 characters']].map(([n,l,t,p]) => (
                                                <div key={n} style={{marginBottom:'1.2rem'}}>
                                                    <label style={{display:'block',fontSize:'0.875rem',fontWeight:600,marginBottom:'0.5rem',color:'var(--text-secondary)'}}>{l}</label>
                                                    <input name={n} type={t} placeholder={p} required minLength={n==='password'?6:undefined}
                                                        style={{width:'100%',padding:'0.85rem 1rem',background:'var(--card-bg)',border:'1.5px solid var(--border-color)',borderRadius:'10px',color:'white',fontSize:'1rem',fontFamily:'inherit',outline:'none'}} />
                                                </div>
                                            ))}
                                            <button type="submit"
                                                style={{width:'100%',padding:'1rem',borderRadius:'10px',background:'linear-gradient(135deg,#ff3366,#7c3aed)',border:'none',color:'white',fontWeight:700,fontSize:'1rem',cursor:'pointer',fontFamily:'inherit',marginTop:'0.5rem'}}>
                                                Create Account
                                            </button>
                                        </form>
                                        <p style={{textAlign:'center',marginTop:'1.5rem',color:'var(--text-secondary)',fontSize:'0.9rem'}}>
                                            Already have an account? <span onClick={() => setAuthModal('login')} style={{color:'var(--accent-primary)',cursor:'pointer',fontWeight:600}}>Sign In</span>
                                        </p>
                                    </>
                                )}
                            </div>
                        </div>
                    )}

                    {/* ===== INFO MODAL ===== */}
                    {infoContent && (
                        <div onClick={e => { if (e.target === e.currentTarget) setInfoContent(null); }}
                            style={{position:'fixed',top:0,left:0,width:'100%',height:'100%',background:'rgba(0,0,0,0.9)',zIndex:3500,display:'flex',alignItems:'center',justifyContent:'center',padding:'1rem'}}>
                            <div style={{background:'var(--secondary-bg)',borderRadius:'20px',width:'100%',maxWidth:'780px',maxHeight:'90vh',overflowY:'auto',border:'1px solid var(--border-color)',position:'relative'}}>
                                <div style={{position:'relative',height:'280px',overflow:'hidden',borderRadius:'20px 20px 0 0'}}>
                                    <img src={infoContent.thumbnailUrl || `https://picsum.photos/seed/${infoContent._id}/800/400`} alt={infoContent.title}
                                        style={{width:'100%',height:'100%',objectFit:'cover'}} />
                                    <div style={{position:'absolute',inset:0,background:'linear-gradient(0deg,var(--secondary-bg) 0%,transparent 60%)'}} />
                                    <button onClick={() => setInfoContent(null)}
                                        style={{position:'absolute',top:'1rem',right:'1rem',width:'38px',height:'38px',borderRadius:'50%',background:'rgba(0,0,0,0.6)',border:'none',color:'white',fontSize:'1.1rem',cursor:'pointer',zIndex:10}}>‚úï</button>
                                </div>
                                <div style={{padding:'1.5rem 2rem 2rem'}}>
                                    <h2 style={{fontFamily:'Unbounded,sans-serif',fontSize:'1.7rem',marginBottom:'0.8rem'}}>{infoContent.title}</h2>
                                    <div style={{display:'flex',flexWrap:'wrap',gap:'0.75rem',marginBottom:'1rem',fontSize:'0.9rem',color:'var(--text-secondary)',alignItems:'center'}}>
                                        {infoContent.year && <span>{infoContent.year}</span>}
                                        {infoContent.duration && <span>‚è± {infoContent.duration}</span>}
                                        {infoContent.language && <span>üåê {infoContent.language}</span>}
                                        {infoContent.rating && <span>‚≠ê {infoContent.rating}/10</span>}
                                        {infoContent.views > 0 && <span>üëÅ {infoContent.views.toLocaleString()} views</span>}
                                        <span style={{background:'var(--accent-primary)',color:'white',padding:'0.2rem 0.7rem',borderRadius:'20px',fontSize:'0.75rem',fontWeight:700}}>{infoContent.type}</span>
                                        {infoContent.category && <span style={{background:'var(--accent-secondary)',color:'white',padding:'0.2rem 0.7rem',borderRadius:'20px',fontSize:'0.75rem',fontWeight:700}}>{infoContent.category}</span>}
                                    </div>
                                    {infoContent.description && <p style={{color:'var(--text-secondary)',lineHeight:1.8,marginBottom:'1.5rem'}}>{infoContent.description}</p>}
                                    <div style={{display:'flex',gap:'1rem',flexWrap:'wrap'}}>
                                        <button className="btn btn-primary" onClick={() => { setInfoContent(null); playContent(infoContent); }}>‚ñ∂ Play Now</button>
                                        <button className="btn btn-secondary" onClick={() => setInfoContent(null)}>Close</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* ===== VIDEO PLAYER ===== */}
                    {playerOpen && selectedContent && (
                        <div style={{position:'fixed',top:0,left:0,width:'100%',height:'100%',background:'rgba(0,0,0,0.97)',zIndex:5000,display:'flex',alignItems:'center',justifyContent:'center',flexDirection:'column',gap:'1rem',padding:'2rem'}}>
                            <div style={{width:'100%',maxWidth:'1200px',display:'flex',justifyContent:'space-between',alignItems:'center'}}>
                                <span style={{fontFamily:'Unbounded,sans-serif',fontSize:'1.1rem',fontWeight:600}}>{selectedContent.title}</span>
                                <button className="player-close" onClick={() => setPlayerOpen(false)}>‚úï</button>
                            </div>
                            <div className="player-container">
                                {getEmbedUrl(selectedContent.videoUrl) ? (
                                    <iframe src={getEmbedUrl(selectedContent.videoUrl)}
                                        style={{width:'100%',height:'100%',border:'none'}}
                                        allowFullScreen allow="autoplay; fullscreen"
                                        title={selectedContent.title} />
                                ) : (
                                    <div className="player-content" style={{flexDirection:'column',gap:'1rem'}}>
                                        <div style={{fontSize:'4rem'}}>üé¨</div>
                                        <div>{selectedContent.title}</div>
                                        {selectedContent.videoUrl && (
                                            <a href={selectedContent.videoUrl} target="_blank" rel="noreferrer"
                                                style={{color:'var(--accent-primary)',fontSize:'1rem',fontWeight:600}}>
                                                Open Video ‚Üó
                                            </a>
                                        )}
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* ===== HERO (home only) ===== */}
                    {page === 'home' && (
                        <section className="hero-section">
                            <div className="hero-content">
                                <div className="hero-badge">
                                    <span>‚ú®</span> {settings.site_tagline || 'PREMIUM CLASSIC CINEMA'}
                                </div>
                                <h1 className="hero-title">
                                    {settings.site_name || 'ClassicFlims'}
                                </h1>
                                <p className="hero-description">
                                    Stream the finest collection of classic films, golden age Hollywood, and timeless cinema masterpieces.
                                </p>
                                <div className="hero-actions">
                                    <button className="btn btn-primary" onClick={() => {
                                        const first = backendContent.featured[0] || backendContent.trending[0] || allContent[0];
                                        if (first) playContent(first);
                                    }}>‚ñ∂ Start Watching</button>
                                    <button className="btn btn-secondary" onClick={() => setPage('movies')}>üìö Browse Catalog</button>
                                </div>
                            </div>
                        </section>
                    )}

                    {/* Page heading for sub-pages */}
                    {page !== 'home' && (
                        <div className="page-subheader">
                            <h1 style={{fontFamily:'Unbounded,sans-serif',fontSize:'2.5rem',marginBottom:'0.5rem'}}>
                                {page === 'movies' ? 'üé¨ Movies' : page === 'series' ? 'üì∫ Series' : 'üì° Live'}
                            </h1>
                        </div>
                    )}

                    {/* Header Ad */}
                    {headerAd && page === 'home' && <AdBanner ad={headerAd} position="header" />}

                    {/* Content */}
                    <div className="content-section">
                        {renderPageContent()}
                    </div>

                    {/* Footer */}
                    <footer className="footer">
                        <div className="footer-content">
                            <div className="footer-section">
                                <h3>About {settings.site_name || 'ClassicFlims'}</h3>
                                <ul className="footer-links">
                                    <li><a href="#">About Us</a></li>
                                    <li><a href="#">Contact</a></li>
                                    <li><a href="#">Terms of Service</a></li>
                                    <li><a href="#">Privacy Policy</a></li>
                                </ul>
                            </div>
                            <div className="footer-section">
                                <h3>Browse</h3>
                                <ul className="footer-links">
                                    <li><a onClick={() => setPage('home')} style={{cursor:'pointer'}}>Home</a></li>
                                    <li><a onClick={() => setPage('movies')} style={{cursor:'pointer'}}>Movies</a></li>
                                    <li><a onClick={() => setPage('series')} style={{cursor:'pointer'}}>Series</a></li>
                                </ul>
                            </div>
                            <div className="footer-section">
                                <h3>Account</h3>
                                <ul className="footer-links">
                                    {!loggedIn ? (
                                        <>
                                            <li><a onClick={() => setAuthModal('login')} style={{cursor:'pointer'}}>Login</a></li>
                                            <li><a onClick={() => setAuthModal('signup')} style={{cursor:'pointer'}}>Sign Up</a></li>
                                        </>
                                    ) : (
                                        <li><a style={{cursor:'pointer',color:'var(--accent-primary)'}} onClick={() => { localStorage.removeItem('userToken'); localStorage.removeItem('userName'); setLoggedIn(false); setUserName(''); }}>Logout ({userName})</a></li>
                                    )}
                                </ul>
                            </div>
                            <div className="footer-section">
                                <h3>Support</h3>
                                <ul className="footer-links">
                                    <li><a href="#">Help Center</a></li>
                                    <li><a href="#">FAQ</a></li>
                                </ul>
                            </div>
                        </div>
                        <div className="footer-bottom">
                            <p>¬© 2026 {settings.site_name || 'ClassicFlims'}. All rights reserved.</p>
                        </div>
                    </footer>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
